<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8">  <meta name="built-on" content="2024-01-24T20:20:27.3206337"><meta name="build-number" content="${buildNumber}">       <title>Pattern Matcher - Basics | Dungeon Architect for Unity</title><script id="virtual-toc-data" type="application/json">[{"id":"introduction","level":0,"title":"Introduction","anchor":"#introduction"},{"id":"create-a-pattern-matcher-asset","level":0,"title":"Create a Pattern Matcher asset","anchor":"#create-a-pattern-matcher-asset"},{"id":"create-your-first-pattern","level":0,"title":"Create your first Pattern","anchor":"#create-your-first-pattern"},{"id":"add-marker-node","level":0,"title":"Add Marker Node","anchor":"#add-marker-node"},{"id":"avoid-overlaps","level":0,"title":"Avoid Overlaps","anchor":"#avoid-overlaps"},{"id":"remove-markers","level":0,"title":"Remove Markers","anchor":"#remove-markers"},{"id":"cleanup","level":0,"title":"Cleanup","anchor":"#cleanup"},{"id":"same-height-constraint","level":0,"title":"Same Height Constraint","anchor":"#same-height-constraint"},{"id":"probability","level":0,"title":"Probability","anchor":"#probability"},{"id":"extend-further","level":0,"title":"Extend further","anchor":"#extend-further"}]</script><script id="topic-shortcuts" type="application/json"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Pattern Matcher - Basics | Dungeon Architect for Unity"/><meta property="og:description" content=""/><meta property="og:image" content=""/><meta property="og:site_name" content="Dungeon Architect for Unity Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="/unity/1.20/pattern-matcher-intro.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Pattern Matcher - Basics | Dungeon Architect for Unity"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "/unity/1.20/pattern-matcher-intro.html#webpage", "url": "/unity/1.20/pattern-matcher-intro.html", "name": "Pattern Matcher - Basics | Dungeon Architect for Unity", "description": "", "image": "", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "/unity/#website", "url": "/unity/", "name": "Dungeon Architect for Unity Help" }</script><!-- End Schema.org --></head>      <body data-id="pattern-matcher-intro" data-main-title="Pattern Matcher - Basics" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="pattern-matcher-overview.md|Pattern Matcher"  >   <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Dungeon Architect for Unity 1.20 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="pattern-matcher-intro"   id="pattern-matcher-intro.md">Pattern Matcher - Basics</h1>  <section class="chapter"><h2 id="introduction" data-toc="introduction"   >Introduction</h2><p id="4b1ebb7c_1853">Capture patterns in your dungeon layout and add or remove markers around this pattern. This is a powerful system for decorating your themes, as you are no longer restricted to a single tile level decoration and can decorate across multiple tiles using your own patterns</p><figure  id="4b1ebb7c_1854"><img alt="Pattern Matcher" src="dungeon-architect-docs/ut-16-01.png" title="Pattern Matcher"  width="1090" height="875"></figure></section><section class="chapter"><h2 id="create-a-pattern-matcher-asset" data-toc="create-a-pattern-matcher-asset"   >Create a Pattern Matcher asset</h2><p id="4b1ebb7c_1855">Create a new asset by right-clicking on the project window: <code class="code" id="4b1ebb7c_1856">Create &gt; Dungeon Architect &gt; Theme Engine &gt; Pattern Matcher</code></p><figure  id="4b1ebb7c_1857"><img alt="Pattern Matcher" src="dungeon-architect-docs/ut-16-02.png" title="Pattern Matcher"  width="1077" height="463"></figure><p id="4b1ebb7c_1858">Double-click the asset to open up the Pattern Matcher editor</p><figure  id="4b1ebb7c_1859"><img alt="Pattern Matcher" src="dungeon-architect-docs/ut-16-03.png" title="Pattern Matcher"  width="179" height="41"></figure><figure  id="4b1ebb7c_1860"><img alt="Pattern Matcher" src="dungeon-architect-docs/ut-16-04.png" title="Pattern Matcher"  width="1090" height="843"></figure></section><section class="chapter"><h2 id="create-your-first-pattern" data-toc="create-your-first-pattern"   >Create your first Pattern</h2><section class="chapter"><h3 id="create-a-new-pattern" data-toc="create-a-new-pattern"   >Create a new Pattern</h3><p id="4b1ebb7c_1861">Start by adding a new pattern by clicking the <code class="code" id="4b1ebb7c_1862">Add</code> button in the <span class="emphasis" id="4b1ebb7c_1863">Patterns</span> panel</p><figure  id="4b1ebb7c_1864"><img alt="Pattern Matcher" src="dungeon-architect-docs/ut-16-05.png" title="Pattern Matcher"  width="256" height="138"></figure><p id="4b1ebb7c_1865">You can have multiple patterns, and they run in sequence one after the other</p><figure  id="4b1ebb7c_1866"><img alt="Pattern Matcher" src="dungeon-architect-docs/ut-16-06.png" title="Pattern Matcher"  width="1095" height="842"></figure></section><section class="chapter"><h3 id="pattern-rules" data-toc="pattern-rules"   >Pattern Rules</h3><p id="4b1ebb7c_1867">A pattern is formed by assembling various pattern rules together (think of them as blocks arranged in a certain way)</p><figure  id="4b1ebb7c_1868"><img alt="Pattern Matcher" src="dungeon-architect-docs/ut-16-07.png" title="Pattern Matcher"  width="1255" height="649"></figure><p id="4b1ebb7c_1869">Right click on an emtpy space and select <code class="code" id="4b1ebb7c_1870">Add new Rule</code></p><figure  id="4b1ebb7c_1871"><img alt="Pattern Matcher" src="dungeon-architect-docs/ut-16-08.png" title="Pattern Matcher"  width="702" height="559"></figure><p id="4b1ebb7c_1872">This will create a new rule</p><figure  id="4b1ebb7c_1873"><img alt="Pattern Matcher" src="dungeon-architect-docs/ut-16-09.png" title="Pattern Matcher"  width="702" height="439"></figure><p id="4b1ebb7c_1874">You can click and drag the rule to another location</p><figure  id="4b1ebb7c_1875"><img alt="Pattern Matcher" src="dungeon-architect-docs/ut-16-10.png" title="Pattern Matcher"  width="728" height="597"></figure><figure  id="4b1ebb7c_1876"><img alt="Pattern Matcher" src="dungeon-architect-docs/ut-16-11.png" title="Pattern Matcher"  width="452" height="414"></figure><figure  id="4b1ebb7c_1877"><img alt="Pattern Matcher" src="dungeon-architect-docs/ut-16-12.png" title="Pattern Matcher"  width="626" height="445"></figure><p id="4b1ebb7c_1878">Move the rule to an tile position like shown below and select it</p><figure  id="4b1ebb7c_1879"><img alt="Pattern Matcher" src="dungeon-architect-docs/ut-16-13.png" title="Pattern Matcher"  width="848" height="618"></figure></section><section class="chapter"><h3 id="pattern-rule-graph" data-toc="pattern-rule-graph"   >Pattern Rule Graph</h3><p id="4b1ebb7c_1880">Each Pattern rule block has a rule graph. Here you define what needs to be present (or not present) at this location for the pattern to match</p><p id="4b1ebb7c_1881">The <code class="code" id="4b1ebb7c_1882">Should Select?</code> node takes in the result of your condition (boolean).</p><p id="4b1ebb7c_1883">Create a graph like this:</p><figure  id="4b1ebb7c_1884"><img alt="Ut 16 14" src="dungeon-architect-docs/ut-16-14.png" title="Ut 16 14"  width="992" height="643"></figure><p id="4b1ebb7c_1885">The text in the rule block will update to reflect the rule graph condition</p><p id="4b1ebb7c_1886">If the pattern is matched (i.e. the condition of every rule block succeeds), then the <code class="code" id="4b1ebb7c_1887">On Selected</code> node will fire on all the rule blocks. Use this node to either emit or remove markers at this block's location (more on this shortly)</p><p id="4b1ebb7c_1888">Create a new rule node next to it as shown below. Place a similar constraint to make sure a ground marker exists in this location</p><figure  id="4b1ebb7c_1889"><img alt="Ut 16 15" src="dungeon-architect-docs/ut-16-15.png" title="Ut 16 15"  width="752" height="663"></figure><p id="4b1ebb7c_1890">Our pattern will now match two adjacent ground blocks, and we can place a <code class="code" id="4b1ebb7c_1891">1x2</code> Ground tile here</p><p id="4b1ebb7c_1892">Whenever this pattern matches, it would fire off the <code class="code" id="4b1ebb7c_1893">On Pattern Selected</code> node</p><p id="4b1ebb7c_1894">Select any one of the two rule block and add a <span class="emphasis" id="4b1ebb7c_1895">Emit Marker</span> node with the name <code class="code" id="4b1ebb7c_1896">Ground1x2</code> <span class="emphasis" id="4b1ebb7c_1897">(later, you'll need to adjust the mesh's offset transform accordingly depending on which block you chose)</span></p><p id="4b1ebb7c_1898">It should look like this:</p><figure  id="4b1ebb7c_1899"><img alt="Ut 16 16" src="dungeon-architect-docs/ut-16-16.png" title="Ut 16 16"  width="1108" height="624"></figure><p id="4b1ebb7c_1900">So, when the dungeon is created in the scene, this would create a marker named <code class="code" id="4b1ebb7c_1901">Ground1x2</code> on all the places where the pattern matched. We'll need to switch back to the <span class="emphasis" id="4b1ebb7c_1902">Theme Graph</span> app mode, so we can add our art asset under the <code class="code" id="4b1ebb7c_1903">Ground1x2</code> marker</p></section><section class="chapter"><h3 id="setup-theme" data-toc="setup-theme"   >Setup Theme</h3><p id="4b1ebb7c_1904">Let's clone a scene from the launchpad and set up our pattern matcher asset in it</p><p id="4b1ebb7c_1905">Navigate to Main Menu: <code class="code" id="4b1ebb7c_1906">Dungeon Architect &gt; Launch Pad</code></p><figure  id="4b1ebb7c_1907"><img alt="Ut 16 17" src="dungeon-architect-docs/ut-16-17.png" title="Ut 16 17"  width="410" height="151"></figure><p id="4b1ebb7c_1908">Clone a Candy Grid builder theme. Navigate to the <code class="code" id="4b1ebb7c_1909">Samples</code>, scroll down to the <span class="emphasis" id="4b1ebb7c_1910">Grid</span> category and clone the <code class="code" id="4b1ebb7c_1911">Demo</code> scene as shown below</p><figure  id="4b1ebb7c_1912"><img alt="Ut 16 18" src="dungeon-architect-docs/ut-16-18.jpg" title="Ut 16 18"  width="541" height="525"></figure><figure  id="4b1ebb7c_1913"><img alt="Ut 16 19" src="dungeon-architect-docs/ut-16-19.jpg" title="Ut 16 19"  width="819" height="676"></figure><p id="4b1ebb7c_1914">Select the dungeon game object and assign our pattern matcher asset to it</p><figure  id="4b1ebb7c_1915"><img alt="Ut 16 20" src="dungeon-architect-docs/ut-16-20.png" title="Ut 16 20"  width="730" height="494"></figure></section></section><section class="chapter"><h2 id="add-marker-node" data-toc="add-marker-node"   >Add Marker Node</h2><p id="4b1ebb7c_1916">Open up the theme file linked to this dungeon and create a new marker node named <code class="code" id="4b1ebb7c_1917">Ground1x2</code></p><figure  id="4b1ebb7c_1918"><img alt="Ut 16 21" src="dungeon-architect-docs/ut-16-21.png" title="Ut 16 21"  width="624" height="314"></figure><figure  id="4b1ebb7c_1919"><img alt="Ut 16 22" src="dungeon-architect-docs/ut-16-22.png" title="Ut 16 22"  width="754" height="404"></figure><p id="4b1ebb7c_1920">Add this prefab under the <code class="code" id="4b1ebb7c_1921">Ground1x2</code> marker node: <code class="code" id="4b1ebb7c_1922">/Game/Geometry/Meshes/1M_Cube_Chamfer</code></p><figure  id="4b1ebb7c_1923"><img alt="Ut 16 23" src="dungeon-architect-docs/ut-16-23.png" title="Ut 16 23"  width="775" height="150"></figure><figure  id="4b1ebb7c_1924"><img alt="Ut 16 24" src="dungeon-architect-docs/ut-16-24.jpg" title="Ut 16 24"  width="1503" height="870"></figure><p id="4b1ebb7c_1925">We want to scale the cube along X axis by 2 units nudge it to the right (since this is a wide tile and is spawned on one of the tile)</p><figure  id="4b1ebb7c_1926"><img alt="Ut 16 25" src="dungeon-architect-docs/ut-16-25.png" title="Ut 16 25"  width="597" height="308"></figure><figure  id="4b1ebb7c_1927"><img alt="Ut 16 26" src="dungeon-architect-docs/ut-16-26.png" title="Ut 16 26"  width="619" height="279"></figure><figure  id="4b1ebb7c_1928"><img alt="Ut 16 27" src="dungeon-architect-docs/ut-16-27.png" title="Ut 16 27"  width="677" height="330"></figure><figure  id="4b1ebb7c_1929"><img alt="Ut 16 28" src="dungeon-architect-docs/ut-16-28.png" title="Ut 16 28"  width="677" height="330"></figure><figure  id="4b1ebb7c_1930"><img alt="Ut 16 29" src="dungeon-architect-docs/ut-16-29.png" title="Ut 16 29"  width="677" height="330"></figure><p id="4b1ebb7c_1931">Select the Cube mesh node in the theme graph and set the following transform:</p><figure  id="4b1ebb7c_1932"><img alt="Ut 16 30" src="dungeon-architect-docs/ut-16-30.png" title="Ut 16 30"  width="621" height="332"></figure><p id="4b1ebb7c_1933">The result looks like this:</p><figure  id="4b1ebb7c_1934"><img alt="Ut 16 31" src="dungeon-architect-docs/ut-16-31.jpg" title="Ut 16 31"  width="1045" height="584"></figure><p id="4b1ebb7c_1935">It has inserted our wide tiles, however there are overlaps.</p></section><section class="chapter"><h2 id="avoid-overlaps" data-toc="avoid-overlaps"   >Avoid Overlaps</h2><p id="4b1ebb7c_1936">Since we are emitting a marker in the left rule block (blue), the system already knows that there might be something spawned at that location, and it will try not to overlap it when searching for this pattern through the scene.</p><figure  id="4b1ebb7c_1937"><img alt="Ut 16 25" src="dungeon-architect-docs/ut-16-25.png" title="Ut 16 25"  width="597" height="308"></figure><p id="4b1ebb7c_1938">However, it does now know that the art asset you plan to insert here would take up 2 tiles and the block on the right (pink) would also be occupied. To let the system know this, select the block on the right (pink) and check <code class="code" id="4b1ebb7c_1939">Hint Will Insert Asset Here</code></p><figure  id="4b1ebb7c_1940"><img alt="Ut 16 32" src="dungeon-architect-docs/ut-16-32.png" title="Ut 16 32"  width="923" height="511"></figure><p id="4b1ebb7c_1941">The tiles no longer overlap</p><figure  id="4b1ebb7c_1942"><img alt="Ut 16 33" src="dungeon-architect-docs/ut-16-33.jpg" title="Ut 16 33"  width="1384" height="614"></figure></section><section class="chapter"><h2 id="remove-markers" data-toc="remove-markers"   >Remove Markers</h2><p id="4b1ebb7c_1943">Since we are inserting a 2-wide ground tile, we don't need the <code class="code" id="4b1ebb7c_1944">Ground</code> marker in its place as it's redundant.</p><p id="4b1ebb7c_1945">Select each of the two rule blocks and add a <code class="code" id="4b1ebb7c_1946">Remove Marker</code> node with the value <code class="code" id="4b1ebb7c_1947">Ground</code> like shown below</p><figure  id="4b1ebb7c_1948"><img alt="Ut 16 34" src="dungeon-architect-docs/ut-16-34.png" title="Ut 16 34"  width="1055" height="633"></figure><figure  id="4b1ebb7c_1949"><img alt="Ut 16 35" src="dungeon-architect-docs/ut-16-35.png" title="Ut 16 35"  width="1048" height="673"></figure></section><section class="chapter"><h2 id="cleanup" data-toc="cleanup"   >Cleanup</h2><p id="4b1ebb7c_1950">Just for consistency, let's update the Candy theme's ground tile to have the same art asset. We've removed the default ground mesh node and replaced it with a new mesh node that has the same chamfered gray cube (scaled to <code class="code" id="4b1ebb7c_1951">4x1x4</code> since it takes up a single tile)</p><p id="4b1ebb7c_1952">Before:</p><figure  id="4b1ebb7c_1953"><img alt="Ut 16 36" src="dungeon-architect-docs/ut-16-36.jpg" title="Ut 16 36"  width="1537" height="1016"></figure><figure  id="4b1ebb7c_1954"><img alt="Ut 16 37" src="dungeon-architect-docs/ut-16-37.jpg" title="Ut 16 37"  width="1354" height="947"></figure></section><section class="chapter"><h2 id="same-height-constraint" data-toc="same-height-constraint"   >Same Height Constraint</h2><p id="4b1ebb7c_1955">We have a problem in some locations. We don't want ground tiles in adjacent locations to be merged if they are in different heights</p><figure  id="4b1ebb7c_1956"><img alt="Ut 16 38" src="dungeon-architect-docs/ut-16-38.jpg" title="Ut 16 38"  width="1038" height="804"></figure><p id="4b1ebb7c_1957">To fix this, select the pattern and have a look at the details panel</p><p id="4b1ebb7c_1958">Add an entry to the <code class="code" id="4b1ebb7c_1959">Same Height Markers</code> list named <code class="code" id="4b1ebb7c_1960">Ground</code>. This will match the pattern where all the entries in this list are in the same height</p><figure  id="4b1ebb7c_1961"><img alt="Ut 16 39" src="dungeon-architect-docs/ut-16-39.png" title="Ut 16 39"  width="762" height="514"></figure><figure  id="4b1ebb7c_1962"><img alt="Ut 16 40" src="dungeon-architect-docs/ut-16-40.jpg" title="Ut 16 40"  width="1280" height="868"></figure></section><section class="chapter"><h2 id="probability" data-toc="probability"   >Probability</h2><p id="4b1ebb7c_1963">Change the layer's probability field to a value between 0 and 1 (i.e. 0% to 100%). Setting this to 0.5 would insert our wide tiles 50% of the time</p><p id="4b1ebb7c_1964"><span class="control" id="4b1ebb7c_1965">Before (with 100% probability):</span></p><figure  id="4b1ebb7c_1966"><img alt="Ut 16 41" src="dungeon-architect-docs/ut-16-41.png" title="Ut 16 41"  width="528" height="223"></figure><figure  id="4b1ebb7c_1967"><img alt="Ut 16 42" src="dungeon-architect-docs/ut-16-42.jpg" title="Ut 16 42"  width="1590" height="941"></figure><p id="4b1ebb7c_1968"><span class="control" id="4b1ebb7c_1969">After (with 50% probability):</span></p><figure  id="4b1ebb7c_1970"><img alt="Ut 16 44" src="dungeon-architect-docs/ut-16-44.png" title="Ut 16 44"  width="514" height="242"></figure><figure  id="4b1ebb7c_1971"><img alt="Ut 16 43" src="dungeon-architect-docs/ut-16-43.jpg" title="Ut 16 43"  width="1590" height="941"></figure></section><section class="chapter"><h2 id="extend-further" data-toc="extend-further"   >Extend further</h2><p id="4b1ebb7c_1972">Another pattern was added for 2x2 tiles with a probability of 0.5 (and moved up to the first entry)</p><figure  id="4b1ebb7c_1973"><img alt="Ut 16 45" src="dungeon-architect-docs/ut-16-45.png" title="Ut 16 45"  width="937" height="705"></figure><figure  id="4b1ebb7c_1974"><img alt="Ut 16 47" src="dungeon-architect-docs/ut-16-47.png" title="Ut 16 47"  width="717" height="313"></figure><figure  id="4b1ebb7c_1975"><img alt="Ut 16 46" src="dungeon-architect-docs/ut-16-46.jpg" title="Ut 16 46"  width="1283" height="659"></figure><aside class="prompt" data-type="tip" data-title="" id="4b1ebb7c_1976"><p id="4b1ebb7c_1977">You can do a lot more with the system. More examples will be added to this section soon</p></aside></section><div class="last-modified"> Last modified: 24 January 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="pattern-matcher-overview.html">Pattern Matcher</a>   <a class="navigation-links__next" href="advanced-theming-overview.html">Advanced Theming</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.js"></script>
    <script src="../js/unity.js" defer></script>
</body></html>