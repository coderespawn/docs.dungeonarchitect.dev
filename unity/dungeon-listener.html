<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8">  <meta name="built-on" content="2024-01-24T20:20:27.3348074"><meta name="build-number" content="${buildNumber}">       <title>Dungeon Listener | Dungeon Architect for Unity</title><script id="virtual-toc-data" type="application/json">[{"id":"setup","level":0,"title":"Setup","anchor":"#setup"},{"id":"event-functions","level":0,"title":"Event Functions","anchor":"#event-functions"}]</script><script id="topic-shortcuts" type="application/json"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Dungeon Listener | Dungeon Architect for Unity"/><meta property="og:description" content=""/><meta property="og:image" content=""/><meta property="og:site_name" content="Dungeon Architect for Unity Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="/unity/1.20/dungeon-listener.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Dungeon Listener | Dungeon Architect for Unity"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "/unity/1.20/dungeon-listener.html#webpage", "url": "/unity/1.20/dungeon-listener.html", "name": "Dungeon Listener | Dungeon Architect for Unity", "description": "", "image": "", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "/unity/#website", "url": "/unity/", "name": "Dungeon Architect for Unity Help" }</script><!-- End Schema.org --></head>      <body data-id="dungeon-listener" data-main-title="Dungeon Listener" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="advanced-dungeons-overview.md|Advanced Dungeons"  >   <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Dungeon Architect for Unity 1.20 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="dungeon-listener"   id="dungeon-listener.md">Dungeon Listener</h1>  <p id="ae4e3c8f_1153">Hook on to the various dungeon events (like PreBuild, PostBuild events) using a custom script. Attach this script to the dungeon game object to automatically receive the notifications</p><section class="chapter"><h2 id="setup" data-toc="setup"   >Setup</h2><p id="ae4e3c8f_1154">Create a new C# script and inherit it from <code class="code" id="ae4e3c8f_1155">DungeonEventListener</code> like below</p><div class="code-block" data-lang="csharp"         >
using UnityEngine;
using DungeonArchitect;

public class MyDungeonListener : DungeonEventListener
{
    public override void OnPostDungeonBuild(Dungeon dungeon, DungeonModel model)
    {
        Debug.Log(&quot;Dungeon build complete&quot;);
        
        // Write your logic here
    }
}
</div><aside class="prompt" data-type="tip" data-title="" id="ae4e3c8f_1157"><p id="ae4e3c8f_1158">Since this is a <code class="code" id="ae4e3c8f_1159">MonoBehaviour</code>, Unity requires the filename of the script to be the same as the class name</p></aside><p id="ae4e3c8f_1160">Next, drop this script on the dungeon game object. Whenever the dungeon get fully built, the <code class="code" id="ae4e3c8f_1161">OnPostDungeonBuild</code> function gets automatically called</p><figure  id="ae4e3c8f_1162"><img alt="Ut 13 52" src="dungeon-architect-docs/ut-13-52.png" title="Ut 13 52"  width="703" height="858"></figure><p id="ae4e3c8f_1163">Get the full list of events from the API docs <a href="http://coderespawn.github.io/dungeon-architect-api-doc-unity/class_dungeon_architect_1_1_dungeon_event_listener.html" id="ae4e3c8f_1164"   data-external="true" rel="noopener noreferrer" >here</a></p></section><section class="chapter"><h2 id="event-functions" data-toc="event-functions"   >Event Functions</h2><p id="ae4e3c8f_1165">Here are a list of all the functions you can override to hook on to the various build events.</p><p id="ae4e3c8f_1166">While building, the following events are called in this order:</p><ul class="list _ul" id="ae4e3c8f_1167"><li class="list__item" id="ae4e3c8f_1168"><p><span class="control" id="ae4e3c8f_1169">Pre Build</span> <code class="code" id="ae4e3c8f_1170">(OnPreDungeonBuild)</code> - Called before the dungeon is built</p></li><li class="list__item" id="ae4e3c8f_1171"><p><span class="control" id="ae4e3c8f_1172">Post Layout Build</span> <code class="code" id="ae4e3c8f_1173">(OnPostDungeonLayoutBuild)</code> - The layout is built in memory but nothing in spawned in the scene</p></li><li class="list__item" id="ae4e3c8f_1174"><p><span class="control" id="ae4e3c8f_1175">Markers Emitted</span> <code class="code" id="ae4e3c8f_1176">(OnDungeonMarkersEmitted)</code> - The layout markers are emitted in the scene for the theme engine to pick up. Nothing is spawned in the scene yet, it gives you an opportunity to modify the marker list before it is sent to the theme engine</p></li><li class="list__item" id="ae4e3c8f_1177"><p><span class="control" id="ae4e3c8f_1178">Post Build</span> <code class="code" id="ae4e3c8f_1179">(OnPostDungeonBuild)</code> - The dungeon is fully built</p></li></ul><p id="ae4e3c8f_1180">While destroying the dungeon, the following events are called in this order:</p><ul class="list _ul" id="ae4e3c8f_1181"><li class="list__item" id="ae4e3c8f_1182"><p><span class="control" id="ae4e3c8f_1183">Pre Destroy</span> <code class="code" id="ae4e3c8f_1184">(OnPreDungeonDestroy)</code> - Called before the dungeon is destroyed</p></li><li class="list__item" id="ae4e3c8f_1185"><p><span class="control" id="ae4e3c8f_1186">Destroyed</span> <code class="code" id="ae4e3c8f_1187">(OnDungeonDestroyed)</code> - Called after the dungeon is destroyed</p></li></ul><section class="chapter"><h3 id="pre-build" data-toc="pre-build"   >Pre Build</h3><p id="ae4e3c8f_1189">Called before the dungeon is about to be built</p><div class="code-block" data-lang="csharp"         >
public override void OnPreDungeonBuild(Dungeon dungeon, DungeonModel model)
{
    // Write your logic here
}
</div></section><section class="chapter"><h3 id="post-layout-build" data-toc="post-layout-build"   >Post Layout Build</h3><p id="ae4e3c8f_1191">This is called after the dungeon layout has been built in memory, but before the prefabs have spawned. The dungeon would not have spawned anything at this stage, but the dungeon model would contain the layout data</p><div class="code-block" data-lang="csharp"         >
public override void OnPostDungeonLayoutBuild(Dungeon dungeon, DungeonModel model)
{
    // Write your logic here
}
</div></section><section class="chapter"><h3 id="markers-emitted" data-toc="markers-emitted"   >Markers Emitted</h3><p id="ae4e3c8f_1193">The layout markers are emitted in the scene for the theme engine to pick up. Nothing is spawned in the scene yet, it gives you an opportunity to modify the marker list before it is sent to the theme engine</p><div class="code-block" data-lang="csharp"         >
public override void OnDungeonMarkersEmitted(Dungeon dungeon, DungeonModel model, LevelMarkerList markers)
{
    // Modify the markers list to add/remove/modify the markers in the scene before they are sent to the theme engine
}
</div></section><section class="chapter"><h3 id="post-build" data-toc="post-build"   >Post Build</h3><p id="ae4e3c8f_1195">Called after the dungeon is fully built</p><div class="code-block" data-lang="csharp"         >
public override void OnPostDungeonBuild(Dungeon dungeon, DungeonModel model)
{
    // Write your logic here
}
</div></section><section class="chapter"><h3 id="pre-destroy" data-toc="pre-destroy"   >Pre Destroy</h3><p id="ae4e3c8f_1197">Called before the dungeon is destroyed</p><div class="code-block" data-lang="csharp"         >
public override void OnPreDungeonDestroy(Dungeon dungeon)
{
    base.OnPreDungeonDestroy(dungeon);
}
</div></section><section class="chapter"><h3 id="destroyed" data-toc="destroyed"   >Destroyed</h3><p id="ae4e3c8f_1199">Called after the dungeon is destroyed</p><div class="code-block" data-lang="csharp"         >
public override void OnDungeonDestroyed(Dungeon dungeon)
{
    base.OnDungeonDestroyed(dungeon);
}
</div></section></section><div class="last-modified"> Last modified: 24 January 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="runtime-dungeons.html">Runtime Dungeons</a>   <a class="navigation-links__next" href="landscape-transformer.html">Landscape Transformer</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.js"></script>
    <script src="../js/unity.js" defer></script>
</body></html>