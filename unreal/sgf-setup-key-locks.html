<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2024-05-28T14:06:25.7894856"><title>Setup Key-Locks | Dungeon Architect for Unreal Engine</title><script type="application/json" id="virtual-toc-data">[{"id":"create-treasure-room","level":0,"title":"Create Treasure Room","anchor":"#create-treasure-room"},{"id":"treasure-room-key-lock","level":0,"title":"Treasure Room Key/Lock","anchor":"#treasure-room-key-lock"},{"id":"main-path-key-lock","level":0,"title":"Main Path Key-Lock","anchor":"#main-path-key-lock"},{"id":"spawn-keys","level":0,"title":"Spawn Keys","anchor":"#spawn-keys"},{"id":"spawn-locks","level":0,"title":"Spawn Locks","anchor":"#spawn-locks"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b259/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Setup Key-Locks | Dungeon Architect for Unreal Engine"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Dungeon Architect for Unreal Engine Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/unreal/2.32/sgf-setup-key-locks.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Setup Key-Locks | Dungeon Architect for Unreal Engine"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/unreal/2.32/sgf-setup-key-locks.html#webpage",
    "url": "writerside-documentation/unreal/2.32/sgf-setup-key-locks.html",
    "name": "Setup Key-Locks | Dungeon Architect for Unreal Engine",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/unreal/#website",
    "url": "writerside-documentation/unreal/",
    "name": "Dungeon Architect for Unreal Engine Help"
}</script><!-- End Schema.org --></head><body data-id="sgf-setup-key-locks" data-main-title="Setup Key-Locks" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="sgf-introduction.md|Snap Grid Flow Builder"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Dungeon Architect for Unreal Engine 2.32 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="sgf-setup-key-locks" id="sgf-setup-key-locks.md">Setup Key-Locks</h1><p id="-axicdj_380">In this section, we'll add a few key-locks to our dungeon using the flow framework</p><p id="-axicdj_381">Open up the flow graph and assign the module database like before</p><figure id="-axicdj_382"><img alt="J 73" src="dungeon-architect-docs/J-73.jpg" title="J 73" width="1394" height="983"></figure><section class="chapter"><h2 id="create-treasure-room" data-toc="create-treasure-room">Create Treasure Room</h2><p id="-axicdj_383">We'll create a treasure room that is attached to the main path. We do this by creating a new path (of length 1) that emits out of the <code class="code" id="-axicdj_384">main</code> path</p><p id="-axicdj_385">Add a new <code class="code" id="-axicdj_386">Create Path</code> node and link it to the end as shown:</p><figure id="-axicdj_387"><img alt="J 137" src="dungeon-architect-docs/J-137.png" title="J 137" width="446" height="271"></figure><p id="-axicdj_388">Select the node and inspect the properties</p><figure id="-axicdj_389"><img alt="J 138" src="dungeon-architect-docs/J-138.png" title="J 138" width="279" height="206"></figure><ul class="list _bullet" id="-axicdj_390"><li class="list__item" id="-axicdj_391"><p>Set the Min/Max size to <code class="code" id="-axicdj_392">1</code> since we want a single room to hold the key</p></li><li class="list__item" id="-axicdj_393"><p>Set the path name to <code class="code" id="-axicdj_394">treasure</code>. We'll use this id later to place a key here</p></li><li class="list__item" id="-axicdj_395"><p><code class="code" id="-axicdj_396">Start from Path</code> is set to <code class="code" id="-axicdj_397">main</code> so this room is connected to the main path</p></li><li class="list__item" id="-axicdj_398"><p>We want the treasure room to be isolated and don't want it to converge back to another path. Leave the <code class="code" id="-axicdj_399">End on Path</code> parameter blank</p></li><li class="list__item" id="-axicdj_400"><p>Change the <code class="code" id="-axicdj_401">Node Color</code> to anything you like</p></li></ul><p id="-axicdj_402">Hit <code class="code" id="-axicdj_403">Build</code> and you'll see a new treasure room created</p><figure id="-axicdj_404"><img alt="J 139" src="dungeon-architect-docs/J-139.jpg" title="J 139" width="471" height="307"></figure></section><section class="chapter"><h2 id="treasure-room-key-lock" data-toc="treasure-room-key-lock">Treasure Room Key/Lock</h2><p id="-axicdj_405">We want to lock the <code class="code" id="-axicdj_406">treasure</code> room and have the key somewhere in the <code class="code" id="-axicdj_407">main</code> path</p><p id="-axicdj_408">Add a new <code class="code" id="-axicdj_409">Create Key/Lock</code> node and link it to the end like shown below:</p><figure id="-axicdj_410"><img alt="J 140" src="dungeon-architect-docs/J-140.png" title="J 140" width="619" height="251"></figure><p id="-axicdj_411">Select the <code class="code" id="-axicdj_412">Create Key/Lock</code> node and inspect the properties</p><figure id="-axicdj_413"><img alt="J 141" src="dungeon-architect-docs/J-141.png" title="J 141" width="354" height="198"></figure><ul class="list _bullet" id="-axicdj_414"><li class="list__item" id="-axicdj_415"><p><code class="code" id="-axicdj_416">Key Path</code> - Since we want the key to be in the main path, set this to <code class="code" id="-axicdj_417">main</code></p></li><li class="list__item" id="-axicdj_418"><p><code class="code" id="-axicdj_419">Lock Path</code> - Since we want to lock the treasure path, set this to <code class="code" id="-axicdj_420">treasure</code></p></li><li class="list__item" id="-axicdj_421"><p><code class="code" id="-axicdj_422">Key Marker Name</code> - We'll use the <span class="control" id="-axicdj_423">Theme Editor</span> to spawn the key blueprint. Set the maker name to anything you like, however you'll need to create a corresponding marker node with the same name in the theme file to spawn the key blueprint. For this tutorial, set this to <code class="code" id="-axicdj_424">KeyYellow</code></p></li><li class="list__item" id="-axicdj_425"><p><code class="code" id="-axicdj_426">Lock Marker Name</code> - We'll use the <span class="control" id="-axicdj_427">Connection editor</span> to spawn the locked door blueprint. Set the marker name to anything you like, however you'll need to create a corresponding marker node in the connection editor to spawn the locked blueprint. For this tutorial, set this to <code class="code" id="-axicdj_428">LockYellow</code></p></li></ul><p id="-axicdj_429">Hit <code class="code" id="-axicdj_430">Build</code> and inspect the layout graph</p><figure id="-axicdj_431"><img alt="J 142" src="dungeon-architect-docs/J-142.jpg" title="J 142" width="800" height="616"></figure><p id="-axicdj_432">A blue lock item was created on the link that connected to the yellow treasure node. The key was placed somewhere in the main path (green). The red arrow shows the key-lock relationship</p><p id="-axicdj_433">Update the description of this node</p><figure id="-axicdj_434"><img alt="J 143" src="dungeon-architect-docs/J-143.png" title="J 143" width="357" height="88"></figure><figure id="-axicdj_435"><img alt="J 144" src="dungeon-architect-docs/J-144.png" title="J 144" width="444" height="160"></figure></section><section class="chapter"><h2 id="main-path-key-lock" data-toc="main-path-key-lock">Main Path Key-Lock</h2><p id="-axicdj_436">We'll create another key lock for the main path. The key would be in the <code class="code" id="-axicdj_437">alt</code> path (orange) and the lock would be somewhere in the <code class="code" id="-axicdj_438">main</code> path.</p><p id="-axicdj_439">Add a new <code class="code" id="-axicdj_440">Create Key/Lock</code> node and link it to the end as shown below:</p><figure id="-axicdj_441"><img alt="J 145" src="dungeon-architect-docs/J-145.png" title="J 145" width="541" height="151"></figure><p id="-axicdj_442">Update the parameters:</p><figure id="-axicdj_443"><img alt="J 146" src="dungeon-architect-docs/J-146.png" title="J 146" width="359" height="156"></figure><div class="table-wrapper"><table class="wide" id="-axicdj_444"><thead><tr class="ijRowHead" id="-axicdj_445"><th id="-axicdj_446"><p>Parameter</p></th><th id="-axicdj_447"><p>Value</p></th></tr></thead><tbody><tr id="-axicdj_448"><td id="-axicdj_449"><p>Key Path</p></td><td id="-axicdj_450"><p>alt</p></td></tr><tr id="-axicdj_451"><td id="-axicdj_452"><p>Lock Path</p></td><td id="-axicdj_453"><p>main</p></td></tr><tr id="-axicdj_454"><td id="-axicdj_455"><p>Key Marker Name</p></td><td id="-axicdj_456"><p>KeyRed</p></td></tr><tr id="-axicdj_457"><td id="-axicdj_458"><p>Lock Marker Name</p></td><td id="-axicdj_459"><p>LockRed</p></td></tr></tbody></table></div><p id="-axicdj_460">Hit <code class="code" id="-axicdj_461">Build</code> and inspect the layout graph</p><figure id="-axicdj_462"><img alt="J 147" src="dungeon-architect-docs/J-147.jpg" title="J 147" width="773" height="662"></figure><p id="-axicdj_463">Update the description of this node to something appropriate</p><figure id="-axicdj_464"><img alt="J 159" src="dungeon-architect-docs/J-159.png" title="J 159" width="309" height="73"></figure><figure id="-axicdj_465"><img alt="J 160" src="dungeon-architect-docs/J-160.png" title="J 160" width="473" height="173"></figure></section><section class="chapter"><h2 id="spawn-keys" data-toc="spawn-keys">Spawn Keys</h2><section class="chapter"><h3 id="setup-theme-file" data-toc="setup-theme-file">Setup Theme File</h3><p id="-axicdj_466">Open up the theme file we created earlier</p><figure id="-axicdj_467"><img alt="J 162" src="dungeon-architect-docs/J-162.jpg" title="J 162" width="167" height="195"></figure><figure id="-axicdj_468"><img alt="J 163" src="dungeon-architect-docs/J-163.jpg" title="J 163" width="800" height="720"></figure><p id="-axicdj_469">Add these key marker nodes that we've specified in the <code class="code" id="-axicdj_470">Create Key/Lock</code> node</p><ul class="list _bullet" id="-axicdj_471"><li class="list__item" id="-axicdj_472"><p><code class="code" id="-axicdj_473">KeyRed</code></p></li><li class="list__item" id="-axicdj_474"><p><code class="code" id="-axicdj_475">KeyYellow</code></p></li></ul><figure id="-axicdj_476"><img alt="J 164" src="dungeon-architect-docs/J-164.png" title="J 164" width="271" height="253"></figure><figure id="-axicdj_477"><img alt="J 165" src="dungeon-architect-docs/J-165.png" title="J 165" width="436" height="140"></figure><aside class="prompt" data-type="note" data-title="" id="-axicdj_478"><p id="-axicdj_479">The maker names are case-sensitive. So make sure you capitalize them correctly</p></aside><p id="-axicdj_480">In the theme editor's content browser, navigate to <code class="code" id="-axicdj_481">DungeonArchitect Content &gt; Samples &gt; DA_SnapGridFlow_SideScroller &gt; Snap &gt; Connection &gt; Blueprints</code></p><p id="-axicdj_482">Drop in the following key blueprints and link them up</p><figure id="-axicdj_483"><img alt="J 166" src="dungeon-architect-docs/J-166.jpg" title="J 166" width="712" height="1128"></figure><ul class="list _bullet" id="-axicdj_484"><li class="list__item" id="-axicdj_485"><p>KeyYellow: <code class="code" id="-axicdj_486">BP_SGF_Key_Yellow</code></p></li><li class="list__item" id="-axicdj_487"><p>KeyRed: <code class="code" id="-axicdj_488">BP_SGF_Key_Red</code></p></li></ul><p id="-axicdj_489">With this mapping, we've defined <span class="control" id="-axicdj_490">what</span> key blueprint to spawn. Next, we'll create a placeable marker asset to define <span class="control" id="-axicdj_491">where</span> to spawn these inside the modules</p></section><section class="chapter"><h3 id="create-a-placeable-marker" data-toc="create-a-placeable-marker">Create a Placeable Marker</h3><p id="-axicdj_492">Create a new placeable marker asset in the content browser and name it <code class="code" id="-axicdj_493">PM_Keys</code></p><figure id="-axicdj_494"><img alt="J 112" src="dungeon-architect-docs/J-112.png" title="J 112" width="529" height="507"></figure><figure id="-axicdj_495"><img alt="J 167" src="dungeon-architect-docs/J-167.png" title="J 167" width="191" height="211"></figure><p id="-axicdj_496">Double click the asset to open up the editor</p><p id="-axicdj_497">Add two marker entries as follows</p><figure id="-axicdj_498"><img alt="J 168" src="dungeon-architect-docs/J-168.png" title="J 168" width="384" height="311"></figure><p id="-axicdj_499">Assign a key preview sprite, so our actors on the scene show a key</p><figure id="-axicdj_500"><img alt="J 169" src="dungeon-architect-docs/J-169.png" title="J 169" width="577" height="731"></figure></section><section class="chapter"><h3 id="place-key-markers" data-toc="place-key-markers">Place Key Markers</h3><p id="-axicdj_501">Open up all your room modules and drop in the <code class="code" id="-axicdj_502">PM_Key</code> placeable marker asset, similar to what we've done with the enemy placeable marker in the previous section</p><p id="-axicdj_503">Drop in at least 2 of these in a room, in case if both the <code class="code" id="-axicdj_504">Red</code> and the <code class="code" id="-axicdj_505">Yellow</code> keys spawn in the same room</p><figure id="-axicdj_506"><img alt="J 170" src="dungeon-architect-docs/J-170.jpg" title="J 170" width="981" height="545"></figure><p id="-axicdj_507">Either move this placeable marker actor up by 100 units (so the key doesn't spawn buried half into the ground), or move the key up in the theme editor by selecting the key nodes and moving it up at Z by 100</p><p id="-axicdj_508">Add this to the lift module as well</p><figure id="-axicdj_509"><img alt="J 171" src="dungeon-architect-docs/J-171.jpg" title="J 171" width="800" height="421"></figure></section><section class="chapter"><h3 id="rebuild-module-database" data-toc="rebuild-module-database">Rebuild module database</h3><p id="-axicdj_510">Since we've modified the module's markers, we need to rebuild the module database cache</p><p id="-axicdj_511">Open up the module database and click <code class="code" id="-axicdj_512">Build Module Cache</code></p><figure id="-axicdj_513"><img alt="J 45" src="dungeon-architect-docs/J-45.png" title="J 45" width="673" height="205"></figure><p id="-axicdj_514">The system now knows where to spawn the keys in the snap module and what blueprints to spawn at those locations</p></section></section><section class="chapter"><h2 id="spawn-locks" data-toc="spawn-locks">Spawn Locks</h2><p id="-axicdj_515">Locks are door blueprints with locking support (optionally with different visuals based on your art asset)</p><p id="-axicdj_516">We'll map these lock blueprints in the connection editor</p><aside class="prompt" data-type="note" data-title="" id="-axicdj_517"><p id="-axicdj_518">Keys are mapped in the <span class="control" id="-axicdj_519">Theme</span> editor. Locks are mapped in the <span class="control" id="-axicdj_520">Connection</span> editor, since they deal with doors</p></aside><section class="chapter"><h3 id="open-connection-editor" data-toc="open-connection-editor">Open Connection Editor</h3><p id="-axicdj_521">Open up the <code class="code" id="-axicdj_522">Connection</code> asset we've created in the <a href="sgf-connections.html" id="-axicdj_523" data-tooltip="A Connection is a stitching point that the Snap framework uses to join rooms together">earlier</a> section</p><figure id="-axicdj_524"><img alt="J 172" src="dungeon-architect-docs/J-172.jpg" title="J 172" width="162" height="206"></figure><figure id="-axicdj_525"><img alt="J 173" src="dungeon-architect-docs/J-173.jpg" title="J 173" width="800" height="587"></figure></section><section class="chapter"><h3 id="create-lock-markers" data-toc="create-lock-markers">Create Lock Markers</h3><p id="-axicdj_526">Right click on the graph and create two marker nodes</p><ul class="list _bullet" id="-axicdj_527"><li class="list__item" id="-axicdj_528"><p><code class="code" id="-axicdj_529">LockRed</code></p></li><li class="list__item" id="-axicdj_530"><p><code class="code" id="-axicdj_531">LockYellow</code></p></li></ul><figure id="-axicdj_532"><img alt="J 174" src="dungeon-architect-docs/J-174.png" title="J 174" width="553" height="327"></figure><figure id="-axicdj_533"><img alt="J 175" src="dungeon-architect-docs/J-175.jpg" title="J 175" width="816" height="731"></figure><aside class="prompt" data-type="note" data-title="" id="-axicdj_534"><p id="-axicdj_535">We used the names <code class="code" id="-axicdj_536">LockRed</code> and <code class="code" id="-axicdj_537">LockYellow</code> since this is what we assigned in the <code class="code" id="-axicdj_538">Create Key/Lock</code> node in the flow graph</p></aside></section><section class="chapter"><h3 id="assign-lock-blueprints" data-toc="assign-lock-blueprints">Assign Lock Blueprints</h3><p id="-axicdj_539">In the connection editor's content browser, navigate to <code class="code" id="-axicdj_540">DungeonArchitect Content &gt; Samples &gt; DA_SnapGridFlow_FPS &gt; Snap &gt; Connections &gt; DoorArt</code> and drop in the following lock blueprints and link them up</p><ul class="list _bullet" id="-axicdj_541"><li class="list__item" id="-axicdj_542"><p>KeyRed: <code class="code" id="-axicdj_543">BP_SGF_Door_Lock_Red</code></p></li><li class="list__item" id="-axicdj_544"><p>KeyYellow: <code class="code" id="-axicdj_545">BP_SGF_Door_Lock_Yellow</code></p></li></ul><figure id="-axicdj_546"><img alt="J 176" src="dungeon-architect-docs/J-176.jpg" title="J 176" width="552" height="1142"></figure></section><section class="chapter"><h3 id="fix-transform" data-toc="fix-transform">Fix Transform</h3><p id="-axicdj_547">Select the <code class="code" id="-axicdj_548">LockRed</code> marker node (make sure the <code class="code" id="-axicdj_549">PREVIEWING</code> blue text is shown). This allows you to preview the objects attached under this marker</p><figure id="-axicdj_550"><img alt="J 177" src="dungeon-architect-docs/J-177.png" title="J 177" width="197" height="122"></figure><figure id="-axicdj_551"><img alt="J 178" src="dungeon-architect-docs/J-178.jpg" title="J 178" width="473" height="576"></figure><p id="-axicdj_552">The red arrow is not pointing correctly (it is not visible as it is inside the door)</p><p id="-axicdj_553">Select the blueprint node attached under it and set the rotation to <code class="code" id="-axicdj_554">(0, 0, -90)</code></p><figure id="-axicdj_555"><img alt="J 179" src="dungeon-architect-docs/J-179.jpg" title="J 179" width="580" height="379"></figure><figure id="-axicdj_556"><img alt="J 180" src="dungeon-architect-docs/J-180.jpg" title="J 180" width="645" height="825"></figure><p id="-axicdj_558">Do the same for <code class="code" id="-axicdj_559">LockYellow</code></p><figure id="-axicdj_560"><img alt="J 181" src="dungeon-architect-docs/J-181.jpg" title="J 181" width="560" height="406"></figure><figure id="-axicdj_561"><img alt="J 182" src="dungeon-architect-docs/J-182.jpg" title="J 182" width="746" height="980"></figure></section><section class="chapter"><h3 id="build-dungeon" data-toc="build-dungeon">Build dungeon</h3><p id="-axicdj_562">Open the scene where we previously <a href="sgf-build-dungeon.html" id="-axicdj_563" data-tooltip="It's time to use everything we've created to build a dungeon">set up</a> our dungeon. Rebuild the dungeon</p><figure id="-axicdj_564"><img alt="J 183" src="dungeon-architect-docs/J-183.jpg" title="J 183" width="800" height="475"></figure><figure id="-axicdj_565"><img alt="J 184" src="dungeon-architect-docs/J-184.jpg" title="J 184" width="800" height="459"></figure><figure id="-axicdj_566"><img alt="J 186" src="dungeon-architect-docs/J-186.jpg" title="J 186" width="800" height="541"></figure><figure id="-axicdj_567"><img alt="J 185" src="dungeon-architect-docs/J-185.jpg" title="J 185" width="800" height="582"></figure></section></section><div class="last-modified">Last modified: 28 May 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="sgf-placeable-markers.html" class="navigation-links__prev">Placeable Markers</a><a href="sgf-create-spawn-room.html" class="navigation-links__next">Create Spawn Room</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b259/app.js"></script>
    <script src="../js/unreal.js" defer></script>
</body></html>