<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2024-05-28T14:06:25.7894856"><title>Setup GridFlow Gameplay | Dungeon Architect for Unreal Engine</title><script type="application/json" id="virtual-toc-data">[{"id":"game-mode","level":0,"title":"Game Mode","anchor":"#game-mode"},{"id":"build-the-dungeon","level":0,"title":"Build the dungeon","anchor":"#build-the-dungeon"},{"id":"readtostartmatch-control-when-the-game-starts","level":0,"title":"ReadToStartMatch - Control when the game starts","anchor":"#readtostartmatch-control-when-the-game-starts"},{"id":"find-player-start","level":0,"title":"Find Player Start","anchor":"#find-player-start"},{"id":"delete-default-player-start","level":0,"title":"Delete default Player Start","anchor":"#delete-default-player-start"},{"id":"assign-the-game-mode","level":0,"title":"Assign the game mode","anchor":"#assign-the-game-mode"},{"id":"use-a-custom-character","level":0,"title":"Use a custom character","anchor":"#use-a-custom-character"},{"id":"async-build","level":0,"title":"Async Build","anchor":"#async-build"},{"id":"hud-and-inventory","level":0,"title":"HUD and Inventory","anchor":"#hud-and-inventory"},{"id":"setup-player-controller","level":0,"title":"Setup Player Controller","anchor":"#setup-player-controller"},{"id":"spawn-hud","level":0,"title":"Spawn HUD","anchor":"#spawn-hud"},{"id":"setup-inventory","level":0,"title":"Setup Inventory","anchor":"#setup-inventory"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b259/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Setup GridFlow Gameplay | Dungeon Architect for Unreal Engine"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Dungeon Architect for Unreal Engine Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/unreal/2.32/gridflow-setup-gameplay.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Setup GridFlow Gameplay | Dungeon Architect for Unreal Engine"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/unreal/2.32/gridflow-setup-gameplay.html#webpage",
    "url": "writerside-documentation/unreal/2.32/gridflow-setup-gameplay.html",
    "name": "Setup GridFlow Gameplay | Dungeon Architect for Unreal Engine",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/unreal/#website",
    "url": "writerside-documentation/unreal/",
    "name": "Dungeon Architect for Unreal Engine Help"
}</script><!-- End Schema.org --></head><body data-id="gridflow-setup-gameplay" data-main-title="Setup GridFlow Gameplay" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="gridflow-builder-overview.md|Grid Flow Builder"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Dungeon Architect for Unreal Engine 2.32 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="gridflow-setup-gameplay" id="gridflow-setup-gameplay.md">Setup GridFlow Gameplay</h1><p id="-93iyb3_389">We'll clone an GridFlow sample scene and setup gameplay on it from scratch</p><p id="-93iyb3_390">Open Launch pad and clone this scene somewhere</p><figure id="-93iyb3_391"><img alt="image|689x141" src="dungeon-architect-docs/E2-f2ac33995166aec74cc3f9d4cad78cc32a03a86d.png" title="image|689x141" width="1181" height="243"></figure><figure id="-93iyb3_392"><img alt="image|690x424" src="dungeon-architect-docs/E2-73c3a01a2d8724fe688f97a733abe80b7fd9667b.jpeg" title="image|690x424" width="1306" height="804"></figure><p id="-93iyb3_393">Open the scene, select the dungeon actor and destroy the dungeon</p><figure id="-93iyb3_394"><img alt="image|690x408" src="dungeon-architect-docs/E2-e0172240a835b5ad10654e7bb3582648462d9c18.png" title="image|690x408" width="1287" height="762"></figure><p id="-93iyb3_395">Hitting play won't do anything, as there's no gameplay in this scene. We'll set that up now. For this, we need a custom GameMode</p><section class="chapter"><h2 id="game-mode" data-toc="game-mode">Game Mode</h2><p id="-93iyb3_396">Create a blueprint that derives from <code class="code" id="-93iyb3_397">GameMode</code> (not <code class="code" id="-93iyb3_398">GameModeBase</code>)</p><figure id="-93iyb3_399"><img alt="image|472x375" src="dungeon-architect-docs/E2-a507031bdf2ab3faa536773c5c878e2b3c87e70b.png" title="image|472x375" width="472" height="375"></figure><figure id="-93iyb3_400"><img alt="image|564x431" src="dungeon-architect-docs/E2-8f80e371e1e376541ad38131dbb93eba4963bb50.png" title="image|564x431" width="564" height="431"></figure><figure id="-93iyb3_401"><img alt="image|674x479" src="dungeon-architect-docs/E2-ae4588e394b9123dbfe6daec47c7fcd9a9a6de27.png" title="image|674x479" width="674" height="479"></figure><p id="-93iyb3_402">We want our dungeon to build in a non-blocking way, where it's built over multiple frames. During this time, you may show an animated loading screen. In this example, we'll keep the player in specitator mode and start the game (spawn our character) only after the dungeon has been fully built</p></section><section class="chapter"><h2 id="build-the-dungeon" data-toc="build-the-dungeon">Build the dungeon</h2><p id="-93iyb3_403">Do thie following:</p><ul class="list _bullet" id="-93iyb3_404"><li class="list__item" id="-93iyb3_405"><p>Create a bool variable to control when the game starts. Call this <code class="code" id="-93iyb3_406">CanStartGame</code> and set the default value to false </p><figure id="-93iyb3_407"><img alt="image|369x109" src="dungeon-architect-docs/E2-a0fd100a746d3ad93fa278ca8f1eca7e6550adb6.png" title="image|369x109" width="369" height="109"></figure></li><li class="list__item" id="-93iyb3_408"><p>Place this logic in BeginPlay. Here we randomize the seed and build the dungoen. Before that, we hook on to the <code class="code" id="-93iyb3_409">OnDungeonBuildComplete</code> event so we get notified when it is fully built. When that happens, we set the boolean flag to true, which would then start the game (logic for that later below) </p><figure id="-93iyb3_410"><img alt="image|690x174" src="dungeon-architect-docs/E2-d70bf22a9568ea9936c8082b576541630b1a3363.png" title="image|690x174" width="2105" height="531"></figure></li></ul></section><section class="chapter"><h2 id="readtostartmatch-control-when-the-game-starts" data-toc="readtostartmatch-control-when-the-game-starts">ReadToStartMatch - Control when the game starts</h2><p id="-93iyb3_411">Override the function <code class="code" id="-93iyb3_412">Read to Start Match</code></p><figure id="-93iyb3_413"><img alt="image|381x500" src="dungeon-architect-docs/E2-feb326bc2ede0268fc4022187c39068564176278.png" title="image|381x500" width="722" height="946"></figure><aside class="prompt" data-type="tip" data-title="" id="-93iyb3_414"><p id="-93iyb3_415">If you don't see this override, this means your game mode derives from <code class="code" id="-93iyb3_416">GameModeBase</code> and not <code class="code" id="-93iyb3_417">GameMode</code></p></aside><p id="-93iyb3_418">Return the <code class="code" id="-93iyb3_419">Can Start Game</code> bool variable value.</p><figure id="-93iyb3_420"><img alt="image|690x366" src="dungeon-architect-docs/E2-b5ddf5e7dbb5497ba9d81ddaa315e05683434308.png" title="image|690x366" width="874" height="464"></figure><p id="-93iyb3_421">This would tell the engine to start the game only after our dungeon is fully built.</p><section class="chapter"><h3 id="detailed-explanation-of-how-this-function-works" data-toc="detailed-explanation-of-how-this-function-works">Detailed explanation of how this function works:</h3><p id="-93iyb3_422"><code class="code" id="-93iyb3_423">Read to Start Match</code> gets called by the engine repeatedly every tick to check if we can start the game. If you don't want to start the game, keep returning false here until you are ready, which is what we're doing here This flag gets set to true after our dungeon gets fully built, at which point we're ready to start</p></section></section><section class="chapter"><h2 id="find-player-start" data-toc="find-player-start">Find Player Start</h2><p id="-93iyb3_424">You need to tell the engine which player start to use Override the <code class="code" id="-93iyb3_425">FindPlayerStart</code> function in your game mode blueprint</p><figure id="-93iyb3_426"><img alt="image|690x441" src="dungeon-architect-docs/E2-ff33dea85942888644cb72c2367604ae34080202.png" title="image|690x441" width="796" height="509"></figure><p id="-93iyb3_427">Put this code in:</p><figure id="-93iyb3_428"><img alt="image|690x213" src="dungeon-architect-docs/E2-7bdad8eb72c2bfecfa9def6b5d7cc5a3d0a493a3.png" title="image|690x213" width="2142" height="663"></figure></section><section class="chapter"><h2 id="delete-default-player-start" data-toc="delete-default-player-start">Delete default Player Start</h2><p id="-93iyb3_429">Our theme file spawns a <code class="code" id="-93iyb3_430">Player Start</code> actor in the spawn room. We want our <code class="code" id="-93iyb3_431">FindPlayerStart</code> function to search and pick this one up. So, we need to make sure we don't have any other PlayerStart actors in the scene.</p><p id="-93iyb3_432">When we created a new scene, there was a default PlayerStart actor, We need to delete this so it doesn't pick that up and place our character in an invalid location</p><figure id="-93iyb3_433"><img alt="image|637x230" src="dungeon-architect-docs/E2-df1e0426bfc14daeeb31adb142c3c1ed22de82fb.png" title="image|637x230" width="637" height="230"></figure><figure id="-93iyb3_434"><img alt="image|637x230" src="dungeon-architect-docs/E2-94db6fb6d09011f1f4d3dcd60bd8642218e727cc.png" title="image|637x230" width="637" height="230"></figure></section><section class="chapter"><h2 id="assign-the-game-mode" data-toc="assign-the-game-mode">Assign the game mode</h2><p id="-93iyb3_435">With the level opened, open the <code class="code" id="-93iyb3_436">World Settings</code> window. Navigate to Settings &gt; World Settings</p><figure id="-93iyb3_437"><img alt="image|690x445" src="dungeon-architect-docs/E2-409cc1a5718764be5372ad5292fc699ef57b1e45.png" title="image|690x445" width="771" height="498"></figure><p id="-93iyb3_438">You'll find the <code class="code" id="-93iyb3_439">Settings</code> button on the top right corner of Unreal Editor</p><figure id="-93iyb3_440"><img alt="image|690x257" src="dungeon-architect-docs/E2-30567fe606e873ad49723686603e07dbf0799acb.png" title="image|690x257" width="1005" height="375"></figure><p id="-93iyb3_441">Hit play and you should see your default pawn (with fly mode) placed at the spawn room</p><figure id="-93iyb3_442"><img alt="image|690x331" src="dungeon-architect-docs/E2-bc8f0e6b9e4184d3ff564e1d6fdaab6101f15c65.jpeg" title="image|690x331" width="800" height="384"></figure></section><section class="chapter"><h2 id="use-a-custom-character" data-toc="use-a-custom-character">Use a custom character</h2><p id="-93iyb3_443">Lets use a Third Person character. Open up your game mode asset, navigate to <code class="code" id="-93iyb3_444">Class Defaults</code></p><figure id="-93iyb3_445"><img alt="image|420x107" src="dungeon-architect-docs/E2-1a1068223a9ab782f58714e2e9773e25869fa15b.png" title="image|420x107" width="420" height="107"></figure><p id="-93iyb3_446">Set the <code class="code" id="-93iyb3_447">Default Pawn Class</code> to something else. I've set it to a third person character (if you don't have it, then add it from the Content Browser &gt; Add &gt; Add Content or Feature Pack &gt; Third Person Character)</p><p id="-93iyb3_448"><code class="code" id="-93iyb3_449">/Game/ThirdPerson/Blueprints/BP_ThirdPersonCharacter</code></p><figure id="-93iyb3_450"><img alt="image|690x301" src="dungeon-architect-docs/E2-f9e63fd1163cb950699d7ded7dcf4908e5bb9e8d.png" title="image|690x301" width="809" height="354"></figure><figure id="-93iyb3_451"><img alt="image|689x399" src="dungeon-architect-docs/E2-2fd1b6c31053c5798530a5f5a0df68ca76c71df5.jpeg" title="image|689x399" width="1283" height="743"></figure><p id="-93iyb3_452">If you're not able to move the character or look around, open up the character blueprint and check the <code class="code" id="-93iyb3_453">Begin Play</code> event. This is how it looks like:</p><figure id="-93iyb3_454"><img alt="image|690x161" src="dungeon-architect-docs/E2-84a2c16afceebdc8549750ad938f76ea5bdaf8d5.png" title="image|690x161" width="2255" height="528"></figure><p id="-93iyb3_455">To fix it, do this:</p><figure id="-93iyb3_456"><img alt="image|690x373" src="dungeon-architect-docs/E2-e316b3f9941893309b7ebf2365793c7aed8e40dc.png" title="image|690x373" width="1358" height="736"></figure></section><section class="chapter"><h2 id="async-build" data-toc="async-build">Async Build</h2><p id="-93iyb3_457">If you want your dungeon to build over multiple frames and not stall for a bit while the meshes spawn in, set it to a non-zero value.</p><figure id="-93iyb3_458"><img alt="image|634x500" src="dungeon-architect-docs/E2-cc5aa50fb10deaa0104cb754805682f3f95048f2.png" title="image|634x500" width="791" height="623"></figure><p id="-93iyb3_459">Here, I allow the system to use up a max of 64ms per frame to spawn in the meshes. It will spread out the mesh spawns over multiple frames.</p></section><section class="chapter"><h2 id="hud-and-inventory" data-toc="hud-and-inventory">HUD and Inventory</h2></section><section class="chapter"><h2 id="setup-player-controller" data-toc="setup-player-controller">Setup Player Controller</h2><p id="-93iyb3_460">Create a Player Controller so we can display the inventory HUD, that comes along with the sample.</p><figure id="-93iyb3_461"><img alt="image|595x304" src="dungeon-architect-docs/E2-c4ca294778a043102a25d47b6c6f0917b17f5ca6.png" title="image|595x304" width="595" height="304"></figure><figure id="-93iyb3_462"><img alt="image|583x467" src="dungeon-architect-docs/E2-e1827da088a142c17a6f5e9996db3294cdad77b5.png" title="image|583x467" width="583" height="467"></figure><p id="-93iyb3_463">Open up the Game Mode asset and assign the new player controller, so it picks it up</p><figure id="-93iyb3_464"><img alt="image|298x383" src="dungeon-architect-docs/E2-c4c250124114513d35add6c778b323e28766d8bc.png" title="image|298x383" width="298" height="383"></figure><figure id="-93iyb3_465"><img alt="image|514x92" src="dungeon-architect-docs/E2-f4a7094ab7944ea8ed46dab6ace255a45057fe9e.png" title="image|514x92" width="514" height="92"></figure><figure id="-93iyb3_466"><img alt="image|690x346" src="dungeon-architect-docs/E2-c369158700453b176f327acf61c52a8b9c7b86a4.png" title="image|690x346" width="804" height="404"></figure></section><section class="chapter"><h2 id="spawn-hud" data-toc="spawn-hud">Spawn HUD</h2><p id="-93iyb3_467">Open the new player controller</p><figure id="-93iyb3_468"><img alt="image|258x376" src="dungeon-architect-docs/E2-aa5dc48ccdb09c5f1dfaa76bd6ad2327e4687d13.png" title="image|258x376" width="258" height="376"></figure><p id="-93iyb3_469">Spawn this widget in: /Script/UMGEditor.WidgetBlueprint'/DungeonArchitect/Samples/DA_GridFlow_Game/UI/UI_GridFowDemo_HUD.UI_GridFowDemo_HUD'</p><figure id="-93iyb3_470"><img alt="image|690x176" src="dungeon-architect-docs/E2-bf0a5b7592fba0541a245a8972025682af105b08.png" title="image|690x176" width="1227" height="313"></figure><figure id="-93iyb3_471"><img alt="image|690x435" src="dungeon-architect-docs/E2-1856afb19c2dc1a005908cb0af4ac9d06548927d.jpeg" title="image|690x435" width="1298" height="820"></figure></section><section class="chapter"><h2 id="setup-inventory" data-toc="setup-inventory">Setup Inventory</h2><p id="-93iyb3_472">Open the third person character and add the inventory component</p><figure id="-93iyb3_473"><img alt="image|690x363" src="dungeon-architect-docs/E2-05cc3c20162cfb176faf9ecc730de8fbb50d95e8.png" title="image|690x363" width="1048" height="552"></figure><p id="-93iyb3_474">Your character should now be able to pick up keys</p><figure id="-93iyb3_475"><img alt="image|690x468" src="dungeon-architect-docs/E2-f08cfb928922a20a76ebc6d27868b2451eb91b4c.jpeg" title="image|690x468" width="1312" height="890"></figure><figure id="-93iyb3_476"><img alt="image|690x468" src="dungeon-architect-docs/E2-10d8ad639ec0791ddfa087fb74b36d7cee0010a7.jpeg" title="image|690x468" width="1312" height="890"></figure><p id="-93iyb3_477">and open the right doors with those keys</p><figure id="-93iyb3_478"><img alt="image|690x468" src="dungeon-architect-docs/E2-8f2885b201d25107e70f3be0a766790e72844ef9.jpeg" title="image|690x468" width="1312" height="890"></figure><figure id="-93iyb3_479"><img alt="image|690x468" src="dungeon-architect-docs/E2-3e235584cad66b86b15b19a742d5eb636ead6e1e.jpeg" title="image|690x468" width="1312" height="890"></figure><aside class="prompt" data-type="tip" data-title="" id="-93iyb3_480"><p id="-93iyb3_481">The inventory component <code class="code" id="-93iyb3_482">GF_Inventory</code> and the UI are simple blueprint implementation in the samples folder and are not part of the core of DA. This means you can integrate your own inventory system easily or build on this</p></aside></section><div class="last-modified">Last modified: 28 May 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="gridflow-mini-map.html" class="navigation-links__prev">Mini-Map</a><a href="snapflow-builder-overview.html" class="navigation-links__next">Snap Flow Builder</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b259/app.js"></script>
    <script src="../js/unreal.js" defer></script>
</body></html>